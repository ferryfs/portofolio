# ====================================================
# üõ°Ô∏è 1. SECURITY UTAMA
# ====================================================

# üö´ MATIKAN FITUR NGINTIP FOLDER
Options -Indexes

# üîí BLOKIR AKSES FILE SENSITIF
# Blokir koneksi, env, git, dan JSON cache
<FilesMatch "^(koneksi\.php|\.env|\.git|composer\.lock|package\.lock|\.json)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# üõ°Ô∏è TAMENG BROWSER
<IfModule mod_headers.c>
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-Content-Type-Options "nosniff"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# ====================================================
# üöÄ 2. URL REWRITE (PRETTY URL)
# ====================================================
RewriteEngine On

# ‚ö†Ô∏è PAKSA HTTPS (Uncomment nanti pas di Hosting)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# üßπ HAPUS TRAILING SLASH (login/ -> login)
# Biar gak error CSS/JS karena path yang salah
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# ‚ú® HILANGKAN EKSTENSI .PHP (UNTUK SEMUA FOLDER TERMASUK APPS)
# 1. Cek dulu apakah user meminta folder? Kalau bukan...
RewriteCond %{REQUEST_FILENAME} !-d
# 2. Cek apakah file .php nya ada?
RewriteCond %{REQUEST_FILENAME}.php -f
# 3. Kalau ada, arahkan ke file .php tersebut
RewriteRule ^(.*)$ $1.php [L]

# 3. Custom Error Page
ErrorDocument 404 /portofolio/404.php